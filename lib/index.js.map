{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import {useRef, useEffect, createElement} from \"react\"\n\nconst isFunction = value => value && (Object.prototype.toString.call(value) === \"[object Function]\" || \"function\" === typeof value || value instanceof Function);\n\nconst {entries} = Object;\n\nfunction toSafeKey(key) {\n    return (key.toLowerCase() !== key)\n        ? key.replace(/[A-Z]/g, '-$&').toLowerCase()\n        : key\n}\n\nfunction toAttributesAndEvents(props) {\n    return entries(props)\n        .filter(([key]) => ![\"tag\", \"children\"].includes(key))\n        .reduce((result, [key, value]) =>\n            (isFunction(value)) \n                ? (result.events[key] = (e) => value(e.detail), result)\n                : (result.attributes[toSafeKey(key)] = value, result)            \n        , {attributes:{}, events:{}})\n}\n\nexport function CustomElement(props) {\n    if (!props.tag) {\n        console.error(\"[CustomElement] Missing tag property\")\n        return null\n    }\n\n    const {attributes, events} = toAttributesAndEvents(props)\n\n    const ref = useRef();\n    useEffect(() => {\n        const { current } = ref\n        if (!current) return;\n        entries(events).forEach(([eventName, eventListener]) =>\n            current.addEventListener(eventName, eventListener)\n        )\n\n        return () => {\n            entries(events).forEach(([eventName, eventListener]) =>\n                current.removeEventListener(eventName, eventListener)\n            )\n        }\n    }, [])\n\n    return createElement(props.tag, {ref,...attributes}, props.children)\n}"],"names":["entries","Object","toAttributesAndEvents","props","filter","key","includes","reduce","result","value","prototype","toString","call","Function","events","e","detail","attributes","toLowerCase","replace","toSafeKey","tag","console","error","ref","useRef","useEffect","current","forEach","eventName","eventListener","addEventListener","removeEventListener","createElement","children"],"mappings":"qEAEA,MAEMA,QAACA,GAAWC,OAQlB,SAASC,EAAsBC,GAC3B,OAAOH,EAAQG,GACVC,QAAO,EAAEC,MAAU,CAAC,MAAO,YAAYC,SAASD,KAChDE,QAAO,CAACC,GAASH,EAAKI,KAbZA,CAAAA,GAASA,IAAoD,sBAA1CR,OAAOS,UAAUC,SAASC,KAAKH,IAAkC,mBAAsBA,GAASA,aAAiBI,UAc3I,CAAYJ,IACLD,EAAOM,OAAOT,GAAQU,GAAMN,EAAMM,EAAEC,QAASR,IAC7CA,EAAOS,WAZ1B,SAAmBZ,GACf,OAAQA,EAAIa,gBAAkBb,EACxBA,EAAIc,QAAQ,SAAU,OAAOD,cAC7Bb,EAS2Be,CAAUf,IAAQI,EAAOD,IACpD,CAACS,WAAW,GAAIH,OAAO,2BAG1B,SAAuBX,GAC1B,IAAKA,EAAMkB,IAEP,OADAC,QAAQC,MAAM,wCACP,KAGX,MAAMN,WAACA,EAAUH,OAAEA,GAAUZ,EAAsBC,GAE7CqB,EAAMC,WAeZ,OAdAC,aAAU,KACN,MAAMC,QAAEA,GAAYH,EACpB,GAAKG,EAKL,OAJA3B,EAAQc,GAAQc,SAAQ,EAAEC,EAAWC,KACjCH,EAAQI,iBAAiBF,EAAWC,KAGjC,KACH9B,EAAQc,GAAQc,SAAQ,EAAEC,EAAWC,KACjCH,EAAQK,oBAAoBH,EAAWC,QAGhD,IAEIG,gBAAc9B,EAAMkB,IAAK,CAACG,IAAAA,KAAOP,GAAad,EAAM+B"}