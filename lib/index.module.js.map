{"version":3,"file":"index.module.js","sources":["../src/index.js"],"sourcesContent":["import React, {useRef, useEffect} from \"react\"\n\nconst isFunction = value => value && (Object.prototype.toString.call(value) === \"[object Function]\" || \"function\" === typeof value || value instanceof Function);\n\nfunction toSafeKey(key) {\n    return (key.toLowerCase() !== key)\n        ? key.replace(/[A-Z]/g, '-$&').toLowerCase()\n        : key\n}\n\nfunction toProps(props) {\n    return Object\n        .entries(props)\n        .filter(p => p[0] !== \"tag\" && !isFunction(p[1]))\n        .reduce((result, [key, value]) => {\n            result[toSafeKey(key)] = value;\n            return result;\n        }, {})\n}\n\nfunction toFunctions(props) {\n    return Object\n        .entries(props)\n        .filter(p => p[0] !== \"tag\" && isFunction(p[1]))\n        .reduce((result, [key, value]) => {\n            result[key] = (e) => value(e.detail);\n            return result;\n        }, {})\n}\n\nexport function CustomElement(props) {\n    if (!props.tag) {\n        console.error(\"[CustomElement] Missing tag property\")\n        return null\n    }\n\n    const ref = useRef();\n    useEffect(() => {\n        const { current } = ref\n        if (!current) return;\n        const events = toFunctions(props)\n        Object.entries(events).forEach(([eventName, eventListener]) =>\n            current.addEventListener(eventName, eventListener)\n        )\n\n        return () => {\n            Object.entries(events).forEach(([eventName, eventListener]) =>\n                current.removeEventListener(eventName, eventListener)\n            )\n        }\n    }, [])\n\n    return React.createElement(props.tag, {ref,...toProps(props)}, null)\n}"],"names":["isFunction","value","Object","prototype","toString","call","Function","toProps","props","entries","filter","p","reduce","result","key","toLowerCase","replace","toSafeKey","CustomElement","tag","console","error","ref","useRef","useEffect","current","events","e","detail","toFunctions","forEach","eventName","eventListener","addEventListener","removeEventListener","React","createElement"],"mappings":"iDAEA,MAAMA,EAAaC,GAASA,IAAoD,sBAA1CC,OAAOC,UAAUC,SAASC,KAAKJ,IAAkC,mBAAsBA,GAASA,aAAiBK,UAQvJ,SAASC,EAAQC,GACb,OAAON,OACFO,QAAQD,GACRE,QAAOC,GAAc,QAATA,EAAE,KAAiBX,EAAWW,EAAE,MAC5CC,QAAO,CAACC,GAASC,EAAKb,MACnBY,EAXZ,SAAmBC,GACf,OAAQA,EAAIC,gBAAkBD,EACxBA,EAAIE,QAAQ,SAAU,OAAOD,cAC7BD,EAQSG,CAAUH,IAAQb,EAClBY,IACR,IAaJ,SAASK,EAAcV,GAC1B,IAAKA,EAAMW,IAEP,OADAC,QAAQC,MAAM,wCACP,KAGX,MAAMC,EAAMC,IAgBZ,OAfAC,GAAU,KACN,MAAMC,QAAEA,GAAYH,EACpB,IAAKG,EAAS,OACd,MAAMC,EApBd,SAAqBlB,GACjB,OAAON,OACFO,QAAQD,GACRE,QAAOC,GAAc,QAATA,EAAE,IAAgBX,EAAWW,EAAE,MAC3CC,QAAO,CAACC,GAASC,EAAKb,MACnBY,EAAOC,GAAQa,GAAM1B,EAAM0B,EAAEC,QACtBf,IACR,IAaYgB,CAAYrB,GAK3B,OAJAN,OAAOO,QAAQiB,GAAQI,SAAQ,EAAEC,EAAWC,KACxCP,EAAQQ,iBAAiBF,EAAWC,KAGjC,KACH9B,OAAOO,QAAQiB,GAAQI,SAAQ,EAAEC,EAAWC,KACxCP,EAAQS,oBAAoBH,EAAWC,QAGhD,IAEIG,EAAMC,cAAc5B,EAAMW,IAAK,CAACG,IAAAA,KAAOf,EAAQC,IAAS"}