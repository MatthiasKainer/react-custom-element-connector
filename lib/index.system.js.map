{"version":3,"file":"index.system.js","sources":["../src/index.js"],"sourcesContent":["import {useRef, useEffect, createElement} from \"react\"\n\nconst isFunction = value => value && (Object.prototype.toString.call(value) === \"[object Function]\" || \"function\" === typeof value || value instanceof Function);\n\nconst {entries} = Object;\n\nfunction toSafeKey(key) {\n    return (key.toLowerCase() !== key)\n        ? key.replace(/[A-Z]/g, '-$&').toLowerCase()\n        : key\n}\n\nfunction toAttributesAndEvents(props) {\n    return entries(props)\n        .filter(([key]) => ![\"tag\", \"children\"].includes(key))\n        .reduce((result, [key, value]) =>\n            (isFunction(value)) \n                ? (result.events[key] = (e) => value(e.detail), result)\n                : (result.attributes[toSafeKey(key)] = value, result)            \n        , {attributes:{}, events:{}})\n}\n\nexport function CustomElement(props) {\n    if (!props.tag) {\n        console.error(\"[CustomElement] Missing tag property\")\n        return null\n    }\n\n    const {attributes, events} = toAttributesAndEvents(props)\n\n    const ref = useRef();\n    useEffect(() => {\n        const { current } = ref\n        if (!current) return;\n        entries(events).forEach(([eventName, eventListener]) =>\n            current.addEventListener(eventName, eventListener)\n        )\n\n        return () => {\n            entries(events).forEach(([eventName, eventListener]) =>\n                current.removeEventListener(eventName, eventListener)\n            )\n        }\n    }, [])\n\n    return createElement(props.tag, {ref,...attributes}, props.children)\n}"],"names":["props","tag","console","error","attributes","events","entries","filter","key","includes","reduce","result","value","Object","prototype","toString","call","Function","e","detail","toLowerCase","replace","toSafeKey","toAttributesAndEvents","ref","useRef","useEffect","current","forEach","eventName","eventListener","addEventListener","removeEventListener","createElement","children"],"mappings":"gKAsBO,SAAuBA,GAC1B,IAAKA,EAAMC,IAEP,OADAC,QAAQC,MAAM,wCACP,KAGX,MAAMC,WAACA,EAAUC,OAAEA,GAhBvB,SAA+BL,GAC3B,OAAOM,EAAQN,GACVO,QAAO,EAAEC,MAAU,CAAC,MAAO,YAAYC,SAASD,KAChDE,QAAO,CAACC,GAASH,EAAKI,KAbZA,CAAAA,GAASA,IAAoD,sBAA1CC,OAAOC,UAAUC,SAASC,KAAKJ,IAAkC,mBAAsBA,GAASA,aAAiBK,UAc3I,CAAYL,IACLD,EAAON,OAAOG,GAAQU,GAAMN,EAAMM,EAAEC,QAASR,IAC7CA,EAAOP,WAZ1B,SAAmBI,GACf,OAAQA,EAAIY,gBAAkBZ,EACxBA,EAAIa,QAAQ,SAAU,OAAOD,cAC7BZ,EAS2Bc,CAAUd,IAAQI,EAAOD,IACpD,CAACP,WAAW,GAAIC,OAAO,KASAkB,CAAsBvB,GAE7CwB,EAAMC,IAeZ,OAdAC,GAAU,KACN,MAAMC,QAAEA,GAAYH,EACpB,GAAKG,EAKL,OAJArB,EAAQD,GAAQuB,SAAQ,EAAEC,EAAWC,KACjCH,EAAQI,iBAAiBF,EAAWC,KAGjC,KACHxB,EAAQD,GAAQuB,SAAQ,EAAEC,EAAWC,KACjCH,EAAQK,oBAAoBH,EAAWC,QAGhD,IAEIG,EAAcjC,EAAMC,IAAK,CAACuB,IAAAA,KAAOpB,GAAaJ,EAAMkC,aA3C/D,MAEM5B,QAACA,GAAWO"}