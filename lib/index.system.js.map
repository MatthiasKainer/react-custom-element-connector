{"version":3,"file":"index.system.js","sources":["../src/index.js"],"sourcesContent":["import React, {useRef, useEffect} from \"react\"\n\nconst isFunction = value => value && (Object.prototype.toString.call(value) === \"[object Function]\" || \"function\" === typeof value || value instanceof Function);\n\nfunction toSafeKey(key) {\n    return (key.toLowerCase() !== key)\n        ? key.replace(/[A-Z]/g, '-$&').toLowerCase()\n        : key\n}\n\nfunction toProps(props) {\n    return Object\n        .entries(props)\n        .filter(p => p[0] !== \"tag\" && !isFunction(p[1]))\n        .reduce((result, [key, value]) => {\n            result[toSafeKey(key)] = value;\n            return result;\n        }, {})\n}\n\nfunction toFunctions(props) {\n    return Object\n        .entries(props)\n        .filter(p => p[0] !== \"tag\" && isFunction(p[1]))\n        .reduce((result, [key, value]) => {\n            result[key] = (e) => value(e.detail);\n            return result;\n        }, {})\n}\n\nexport function CustomElement(props) {\n    if (!props.tag) {\n        console.error(\"[CustomElement] Missing tag property\")\n        return null\n    }\n\n    const ref = useRef();\n    useEffect(() => {\n        const { current } = ref\n        if (!current) return;\n        const events = toFunctions(props)\n        Object.entries(events).forEach(([eventName, eventListener]) =>\n            current.addEventListener(eventName, eventListener)\n        )\n\n        return () => {\n            Object.entries(events).forEach(([eventName, eventListener]) =>\n                current.removeEventListener(eventName, eventListener)\n            )\n        }\n    }, [])\n\n    return React.createElement(props.tag, {ref,...toProps(props)}, null)\n}"],"names":["props","tag","console","error","ref","useRef","useEffect","current","events","Object","entries","filter","p","isFunction","reduce","result","key","value","e","detail","toFunctions","forEach","eventName","eventListener","addEventListener","removeEventListener","React","createElement","toProps","prototype","toString","call","Function","toLowerCase","replace","toSafeKey"],"mappings":"0JA8BO,SAAuBA,GAC1B,IAAKA,EAAMC,IAEP,OADAC,QAAQC,MAAM,wCACP,KAGX,MAAMC,EAAMC,IAgBZ,OAfAC,GAAU,KACN,MAAMC,QAAEA,GAAYH,EACpB,IAAKG,EAAS,OACd,MAAMC,EApBd,SAAqBR,GACjB,OAAOS,OACFC,QAAQV,GACRW,QAAOC,GAAc,QAATA,EAAE,IAAgBC,EAAWD,EAAE,MAC3CE,QAAO,CAACC,GAASC,EAAKC,MACnBF,EAAOC,GAAQE,GAAMD,EAAMC,EAAEC,QACtBJ,IACR,IAaYK,CAAYpB,GAK3B,OAJAS,OAAOC,QAAQF,GAAQa,SAAQ,EAAEC,EAAWC,KACxChB,EAAQiB,iBAAiBF,EAAWC,KAGjC,KACHd,OAAOC,QAAQF,GAAQa,SAAQ,EAAEC,EAAWC,KACxChB,EAAQkB,oBAAoBH,EAAWC,QAGhD,IAEIG,EAAMC,cAAc3B,EAAMC,IAAK,CAACG,IAAAA,KAAOwB,EAAQ5B,IAAS,SAlDnE,MAAMa,EAAaI,GAASA,IAAoD,sBAA1CR,OAAOoB,UAAUC,SAASC,KAAKd,IAAkC,mBAAsBA,GAASA,aAAiBe,UAQvJ,SAASJ,EAAQ5B,GACb,OAAOS,OACFC,QAAQV,GACRW,QAAOC,GAAc,QAATA,EAAE,KAAiBC,EAAWD,EAAE,MAC5CE,QAAO,CAACC,GAASC,EAAKC,MACnBF,EAXZ,SAAmBC,GACf,OAAQA,EAAIiB,gBAAkBjB,EACxBA,EAAIkB,QAAQ,SAAU,OAAOD,cAC7BjB,EAQSmB,CAAUnB,IAAQC,EAClBF,IACR"}